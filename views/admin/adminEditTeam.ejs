<%- include('../adminpartials/head', {title: "Admin || Teams"}) %>
<div class="loading-overlay">
  <div class="loading-spinner"></div>
</div>
<div class="content-wrapper">
  <%- include('../flash') %>
  <div class="container-scroller">
    <div class="container-fluid">
      <div class="row">
        <div class="content-wrapper full-page-wrapper auth-pages">
          <div class="card col-lg-7 mx-auto">
            <div class="card-body px-5 py-5">
              <h3 class="card-title text-left mb-3">Edit <%= team.name %></h3>
              <form action="/admin/teams" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                  <label class="form-text text-muted">
                    Team name
                  </label>
                  <input value="<%= team.name %>" required type="text" class="form-control p_input" name="name">
                </div>
                <div class="row mb-4">
                  <div class="col-6 mx-auto">
                    <div class="panel">
                      <div class="button_outer">
                        <div class="btn_upload">
                          <input accept=".jpg, .jpeg, .png" type="file" id="upload_file" name="image">
                          Team Logo <i class="ms-1 fa fa-upload"></i>
                        </div>
                        <div class="processing_bar"></div>
                        <div class="success_box"></div>
                      </div>
                    </div>
                    <div class="error_msg"></div>
                    <div class="uploaded_file_view" id="uploaded_view">
                      <span class="file_remove">X</span>
                    </div>
                  </div>
                </div>
                <div class="text-center">
                  <button type="submit" class="btn btn-primary btn-block enter-btn">Edit</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  var btnUpload = $("#upload_file")
    , btnOuter = $(".button_outer");
  btnUpload.on("change", function(e) {
    var ext = btnUpload.val()
      .split('.')
      .pop()
      .toLowerCase();
    if ($.inArray(ext, ['gif', 'png', 'jpg', 'jpeg']) == -1) {
      $(".error_msg")
        .text("Not an Image...");
    } else {
      $(".error_msg")
        .text("");
      btnOuter.addClass("file_uploading");
      setTimeout(function() {
        btnOuter.addClass("file_uploaded");
      }, 3000);
      var uploadedFile = URL.createObjectURL(e.target.files[0]);
      setTimeout(function() {
        $("#uploaded_view")
          .addClass("showdisplayblock");

        $("#uploaded_view")
          .append('<img src="' + uploadedFile + '" />')
          .addClass("show");
      }, 3500);
    }
  });
  $(".file_remove")
    .on("click", function(e) {
      $("#uploaded_view")
        .removeClass("showdisplayblock");
      $("#uploaded_view")
        .removeClass("show");
      $("#uploaded_view")
        .find("img")
        .remove();
      btnOuter.removeClass("file_uploading");
      btnOuter.removeClass("file_uploaded");
    });

</script>
<%- include('../adminpartials/footer') %>
